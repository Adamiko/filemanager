"use strict";var filemanager=angular.module("filemanager",["ngRoute"]);angular.module("filemanager").filter("fileMime",function(){return function(filesList,fileMimeTypesList){var files=[];return"undefined"==typeof fileMimeTypesList||0===fileMimeTypesList.length?filesList:(filesList.forEach(function(file){fileMimeTypesList.indexOf(file.mime)>-1&&files.push(file)}),files)}}),angular.module("filemanager").factory("FileObj",["FileTypes",function(FileTypes){function FileObj(data){this.image=!1,this.setData(data)}return FileObj.prototype={setData:function(data){angular.extend(this,data),this.image=FileTypes.images.indexOf(this.mime)>-1?!0:!1},isImage:function(){return this.image}},FileObj}]).factory("DirObj",function(){function DirObj(data){this.setData(data)}return DirObj.prototype={setData:function(data){angular.extend(this,data)}},DirObj}),angular.module("filemanager").service("FileTypes",function(){this.images=["image/jpg","image/jpeg","image/png","image/gif","image/png"],this.audio=["audio/mpeg","audio/x-ms-wma","audio/vnd.rn-realaudio","audio/x-wav"],this.video=["video/mpeg","video/mp4","video/quicktime","video/x-ms-wmv"],this.archive=["application/zip"]}).service("FileIconClasses",function(){this.classes={pdf:"fa-file-text"},this.getClass=function(fileName){var ext=fileName.substr(_.lastIndexOf(fileName,".")+1);return this.classes[ext]||"fa-file"}}),angular.module("filemanager").controller("MainCtrl",["$scope","$http","DirObj","FileObj","FileIconClasses",function($scope,$http,DirObj,FileObj,FileIconClasses){$scope.dirs=[],$scope.files=[],$scope.fileTypeFilter=!1,$scope.fileTypes={images:["image/jpg","image/jpeg","image/png","image/gif","image/png"],audio:["audio/mpeg","audio/x-ms-wma","audio/vnd.rn-realaudio","audio/x-wav"],video:["video/mpeg","video/mp4","video/quicktime","video/x-ms-wmv"],archive:["application/zip"]},$http.get("/data/directory.json").success(function(data){data.dirs.forEach(function(dirData){$scope.dirs.push(new DirObj(dirData))}),data.files.forEach(function(fileData){$scope.files.push(new FileObj(fileData))})}),$scope.setFilterType=function(filterName){$scope.fileTypeFilter=filterName&&filterName!==!1&&$scope.fileTypes[filterName]?filterName:!1},$scope.getIconClass=function(file){return FileIconClasses.getClass(file.name)}}]);